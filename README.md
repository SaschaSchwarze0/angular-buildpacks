# AngularBuildpacks

This project was generated with [Angular CLI](https://github.com/angular/angular-cli) version 11.0.5. It was subsequently customized to be supported by the [Paketo Buildpacks](https://paketo.io/). Namely, these modifications which you can also see in the last commit:

* In the [package.json](package.json), the `postinstall` script was added to run the [postInstall.sh](postInstall.sh) script. The script checks the existance of the Angular CLI in the node_modules. This is supposed to be missing because buildpacks runs `npm ci` in `NODE_ENV=production` mode which causes devDependencies to be skipped. The script therefore runs `npm ci` in non-production mode to load all dependencies. The script then runs `npm run build`. The `build` script itself was slightly modified with the addition of the [`--prod` flag](https://angular.io/cli/build) to create an optimized build. NOTE: this is all not ideal because now too many files are packages. Ideal would be to package only the `dist` directory and everything needed for the `serve` package. There are ways to reach this, but require so many hacks that one better writes a Dockerfile.
* In the [package.json](package.json), the `start` script was renamed to `dev`. This causes the [npm-start](https://github.com/paketo-buildpacks/npm-start) not to run `ng serve`.
* In the [package.json](package.json), a new `start` script was added that uses [`serve`](https://www.npmjs.com/package/serve) to serve the compiled resources. The `-l 8080` argument defines the port number. The `-s` option defines that a single-page application is served and unknown requests are to be handled by the index.html.
